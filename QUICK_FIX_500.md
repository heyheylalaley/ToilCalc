# Быстрое исправление ошибки 500

## Проблема
После авторизации через Google OAuth появляется ошибка 500 на `/auth/v1/callback`.

## Причина
Таблицы в базе данных не созданы или пользователь не существует.

## Решение за 3 шага

### Шаг 1: Выполните SQL схему (ОБЯЗАТЕЛЬНО!)

1. Откройте Supabase Dashboard: https://supabase.com/dashboard
2. Выберите проект
3. Перейдите в **SQL Editor** (в левом меню)
4. Откройте файл `supabase-schema.sql` из вашего проекта
5. **Скопируйте ВЕСЬ код** из файла
6. Вставьте в SQL Editor в Supabase
7. Нажмите **Run** (или кнопку запуска)
8. Дождитесь сообщения об успехе

**Это создаст:**
- ✅ Таблицы `users`, `logs`, `settings`
- ✅ Индексы для быстрого поиска
- ✅ RLS политики безопасности
- ✅ Триггер для автоматического создания пользователей

### Шаг 2: Добавьте пользователя вручную

1. В Supabase Dashboard перейдите в **Table Editor**
2. Выберите таблицу **users**
3. Нажмите **Insert** → **Insert row**
4. Заполните:
   - **name**: `Ihor Vasyliev`
   - **email**: `b1ackproff@gmail.com` (ваш email из Google)
   - **role**: `admin`
5. Нажмите **Save**

**Важно:** Email должен **точно совпадать** с email вашего Google аккаунта!

### Шаг 3: Проверьте

1. Очистите кэш браузера (Ctrl+Shift+Delete)
2. Откройте: https://heyheylalaley.github.io
3. Попробуйте войти через Google снова
4. Теперь должно работать!

## Если все еще не работает

### Проверьте логи

1. В Supabase Dashboard → **Logs** → **API Logs**
2. Найдите последние ошибки 500
3. Посмотрите детали ошибки

### Проверьте таблицы

В **SQL Editor** выполните:
```sql
SELECT * FROM users;
SELECT * FROM settings;
```

Если таблицы пустые или не существуют - выполните SQL схему снова.

### Проверьте триггер

В **SQL Editor** выполните:
```sql
SELECT trigger_name 
FROM information_schema.triggers 
WHERE trigger_name = 'on_auth_user_created';
```

Если ничего не вернулось - триггер не создан. Выполните SQL схему снова.

## Важно

- ✅ SQL схему нужно выполнить **один раз** при первой настройке
- ✅ Пользователя можно добавить вручную или он создастся автоматически через триггер
- ✅ Email должен точно совпадать с Google аккаунтом

## После исправления

После выполнения SQL схемы и добавления пользователя, OAuth должен работать корректно и вы сможете войти в систему.

